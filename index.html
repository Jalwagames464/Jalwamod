<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jalwa V7 Pro - Linked Mod</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --gold: #FFD700; --green: #2ecc71; --red: #ff4757; --violet: #9b59b6; }
        body { background: #000; font-family: 'Segoe UI', sans-serif; margin: 0; color: white; padding-bottom: 80px; text-align: center; }
        .header { background: #000; color: var(--gold); padding: 15px; font-size: 20px; font-weight: 900; border-bottom: 2px solid var(--gold); }
        .period-box { color: var(--gold); font-size: 14px; margin-top: 20px; letter-spacing: 1px; }
        .timer-circle { width: 120px; height: 120px; border: 4px solid var(--gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 35px; margin: 25px auto; color: var(--gold); box-shadow: 0 0 15px rgba(255,215,0,0.2); }
        .signal-grid { display: flex; justify-content: center; gap: 15px; margin-top: 30px; }
        .ball { width: 75px; height: 75px; border-radius: 50%; border: 2px solid #333; opacity: 0.1; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px; transition: 0.5s; }
        .active-g { opacity: 1; background: var(--green); box-shadow: 0 0 40px var(--green); }
        .active-r { opacity: 1; background: var(--red); box-shadow: 0 0 40px var(--red); }
        .active-v { opacity: 1; background: var(--violet); box-shadow: 0 0 40px var(--violet); }
    </style>
</head>
<body>

<div class="header">JALWA V7 PRO</div>

<div id="hack">
    <div class="period-box">PERIOD: <span id="period-num">Loading...</span></div>
    <div class="timer-circle" id="timer">00:30</div>
    
    <div class="signal-grid">
        <div id="ball-g" class="ball">GREEN</div>
        <div id="ball-v" class="ball">VIOLET</div>
        <div id="ball-r" class="ball">RED</div>
    </div>
    
    <div style="margin-top:50px; color:#444; font-size:12px;">SERVER SYNCED WITH GAME âœ…</div>
</div>

<script>
    const firebaseConfig = { databaseURL: "https://jalwa-v2-ad222-default-rtdb.firebaseio.com/" };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // --- Period & Timer Sync (Same as Game Code) ---
    setInterval(() => {
        const now = new Date();
        let sec = now.getSeconds();
        let rem = 30 - (sec % 30);
        let pId = now.getFullYear().toString() + (now.getMonth()+1).toString().padStart(2,'0') + now.getDate().toString().padStart(2,'0') + "30" + Math.floor((now.getHours()*3600 + now.getMinutes()*60 + now.getSeconds())/30);
        
        document.getElementById('period-num').innerText = pId;
        document.getElementById('timer').innerText = "00:" + (rem < 10 ? "0" + rem : rem);
    }, 1000);

    // --- Signal Logic Linked to Admin nextResult ---
    db.ref('nextResult').on('value', (snap) => {
        const res = String(snap.val() || "").toLowerCase();
        const g = document.getElementById('ball-g');
        const v = document.getElementById('ball-v');
        const r = document.getElementById('ball-r');
        
        g.className = v.className = r.className = 'ball'; // Reset colors

        if(res !== "") {
            // Mapping Logic
            let finalColor = res;
            if(['1','3','7','9'].includes(res)) finalColor = 'green';
            if(['2','4','6','8'].includes(res)) finalColor = 'red';
            if(['0','5'].includes(res)) finalColor = 'violet';

            if(finalColor === 'green' || finalColor === 'Green') g.classList.add('active-g');
            if(finalColor === 'red' || finalColor === 'Red') r.classList.add('active-r');
            if(finalColor === 'violet' || finalColor === 'Violet') v.classList.add('active-v');
        }
    });
</script>
</body>
</html>

